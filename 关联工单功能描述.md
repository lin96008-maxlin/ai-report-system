# 无需开发其他功能，仅开发新增编辑模板-关联工单tab中的功能，功能要求如下：

一、页面/模块优化建议
1. 数据隔离警示：在代码注释和数据操作逻辑中，明确区分“维度管理中的关联工单配置”与“当前报告模板的关联工单配置”，确保操作（尤其删除、修改）仅影响模板关联数据，绝不污染维度管理原始数据。
2. 初始化数据源：当用户插入维度内容（且该内容在维度管理中已开启关联工单配置）时，自动将维度管理中该内容的 工单过滤条件信息（副本） 作为初始值，在关联工单Tab中创建一条新记录。此记录独立存储。
3. 顺序持久化：实现拖拽排序功能，并确保顺序变化能保存。
4. 预览状态校验：在执行“查看关联诉求”操作前，严格校验当前报告模板是否已完成“设置预览条件并生成预览”流程。未完成则给出明确提示：“请在设置预览条件，生成预览后查看关联诉求”。
5. 批量操作确认：实现批量删除功能时，添加二次确认步骤（如弹出确认框），防止误操作。
二、核心功能设计要点
1. 维度插入自动记录：
o 在报告模板编辑器中插入维度时，检查该维度下插入的每个内容项。
o 若该内容项在维度管理中开启了“关联工单配置”，则自动在关联工单Tab的列表末尾新增一条记录。
o 记录字段：从维度内容中获取 章节名称、章节内容、章节级别。
o 过滤条件：将维度管理中为该内容项配置的工单过滤条件 复制 一份，作为此模板关联记录的初始过滤条件值（独立存储）。
2. 关联工单Tab UI结构：
o 查询条件栏： 字段：章节名称 (输入框)、章节内容 (输入框)、章节级别 (下拉选项：一级/二级/三级)。完全复用 模板管理页面现有查询条件的UI组件与样式。
o 操作栏： 包含一个 批量删除 按钮。完全复用 模板管理页面操作栏的现有样式。
o 列表区域：
• 字段：序号 (自动生成)、章节名称、章节内容、章节级别、操作。
• 操作列包含按钮：编辑、查看关联工单、删除。
• 样式：
• 表头：高度 40px，背景色 #F5F7FA。
• 数据行：高度 50px，无背景色（默认）。
• 表头及所有数据列字体颜色：#223355。
• 操作列按钮字体颜色：编辑 和 查看关联工单 为 #3388FF，删除 为 #FF4433。
• 特殊元素： 列表最左侧显示拖拽图标（如 ≡），支持行拖拽排序。
o 翻页栏： 标准分页组件。
3. 操作逻辑：
o 拖拽排序： 用户可通过拖拽图标调整列表中记录的顺序。调整后的顺序需保存。
o 删除/批量删除：
• 功能：仅删除当前报告模板与选中内容项的关联关系记录（包括其关联的工单过滤条件配置）。
• 后果：绝不删除维度管理模块中的维度内容或其关联工单配置。
o 查看关联诉求：
• 前置条件检查： 执行此操作时，必须检查当前报告模板是否已设置预览条件并生成了预览。
• 满足条件： 弹出“查看关联诉求”弹窗。
• 不满足条件： 显示提示信息：“请在设置预览条件，生成预览后查看关联诉求”。
o 编辑：
• 点击后弹出配置弹窗。
• 过滤条件字段： 上报时间、诉求来源、所属区域、诉求事项、诉求标签。
• 初始值： 自动带入当前模板中为该记录配置的过滤条件值（这些值初始来源于维度管理，但后续可独立修改）。
• 修改范围： 用户修改只影响当前报告模板中该条记录的关联工单过滤条件配置。绝不修改维度管理中该内容项的原始关联工单配置。
4. 查看关联诉求弹窗：
o 标题： “查看关联诉求”。
o 查询条件栏： 字段：诉求编号、诉求标题、诉求描述、上报时间、诉求标签、诉求事项、诉求来源、诉求性质、所属区域、处置部门、诉求状态（下拉选项：待批转，待签收，待处置，待评价，已办结）。完全复用 模板管理页面现有查询条件的UI组件与样式。
o 列表区域：
• 字段：序号、诉求编号、诉求标题、诉求描述、上报时间、诉求标签、诉求事项、诉求来源、诉求性质、所属区域、处置部门、诉求状态。
• 样式：
• 表头：高度 40px，背景色 #F5F7FA。
• 数据行：高度 50px，无背景色（默认）。
• 表头及所有数据列字体颜色：#223355。
• 诉求编号 列字体颜色：#3388FF。
三、关键流程联动说明
1. 数据来源初始化： 当用户在报告模板编辑器中插入一个维度内容项（ItemA），且该ItemA在维度管理中已开启关联工单配置（配置了过滤条件FilterA）时：
o 系统自动在当前模板的关联工单Tab列表中创建一条新记录R。
o 记录R的 章节名称、章节内容、章节级别 取自ItemA。
o 记录R的关联工单过滤条件初始值为FilterA的副本。
o 记录R及其过滤条件存储在模板关联数据表中，与维度管理的原始配置（ItemA和FilterA）物理隔离。
2. 独立操作： 用户在关联工单Tab中对记录R进行的所有操作（编辑过滤条件、删除）：
o 仅影响记录R本身及其在模板关联数据表中的过滤条件数据。
o 绝不触及维度管理模块中的ItemA或其原始过滤条件FilterA。
3. 查看关联诉求依赖： “查看关联诉求”功能依赖报告模板的“预览”流程生成的数据/状态，两者需建立状态关联检查。
四、闭环管理价值点提炼
1. 配置继承与隔离： 高效复用维度管理中预定义的工单过滤规则作为模板级配置的起点，同时确保模板级的个性化调整（编辑）不会污染原始维度配置，保障配置管理的灵活性与安全性。
2. 精准预览驱动： “查看关联诉求”强制依赖预览生成步骤，确保用户查看的工单数据是基于真实有效的预览条件结果，提升数据查看的准确性和操作流程的严谨性。
3. 模板定制化关联管理： 提供针对单个报告模板的、与其正文插入内容严格对应的关联工单配置管理能力（增、删、改、查、排序），实现模板级别的精细化工单数据关联控制。
4. 操作安全闭环： 删除操作严格限定在解除模板与内容的关联关系层面，明确规避了误删核心维度数据的风险，保障系统基础数据的完整性。
5. 用户体验一致性： UI组件（查询栏、操作栏）及关键流程（批量删除）复用现有成熟样式和逻辑，降低用户学习成本，提升整体操作体验的一致性和效率。

